<ul class="nav navbar-nav navbar-right">
    <li class="">
        <a href="javascript:;" class="user-profile dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
            @*<img src="~/images/test01.jpg" id="profilePic" alt="">*@
            @if (@Session["loggedInUser"] != null)
            {
                @Session["loggedInUser"].ToString();
            }
            <span class=" fa fa-angle-down"></span>
        </a>
        <ul class="dropdown-menu dropdown-usermenu pull-right">
            <li>
                @if (Session["UserType"] != null)
                {
                    if (Session["UserType"].ToString() == "OFFICE STAFF")
                    {
                        <a href="@Url.Action("ViewOfficeStaffProfile", "Admin", new { id = Convert.ToInt32(Session["loggedInUserId"].ToString()) })">Profile</a>
                    }
                    else if (Session["UserType"].ToString() == "ADMINISTRATOR")
                    {
                        <a href="javascript:;">
                            Administartor
                        </a>
                    }
                }
            </li>
            @*<li>
            <a href="javascript:;">
                <span class="badge bg-red pull-right">50%</span>
                <span>Settings</span>
            </a>
        </li>
        <li><a href="javascript:;">Help</a></li>*@
            @if (Session["UserType"] != null)
            {
                <li>
                    <a href="@Url.Action("AdminProfile", "Admin", new { id = Convert.ToInt32(Session["loggedInUserId"].ToString()) })"> View Profile</a>
                </li>
                <li>
                    <a href="@Url.Action("ChangePassword", "Account")">Change Password</a>
                </li>
                <li>
                    <a href="@Url.Action("Logout", "Home")">
                        <i class="fa fa-sign-out pull-right"></i>
                        Log Out
                    </a>
                </li>
            }
            else
            {
                <li>
                    <a href="@Url.Action("Login", "Account")">
                        <i class="fa fa-sign-in pull-right"></i>
                        Log In
                    </a>
                </li>
            }
        </ul>
    </li>
    @*<li role="presentation" class="dropdown">
            <a href="javascript:;" class="dropdown-toggle info-number" data-toggle="dropdown" aria-expanded="false">
                <i class="fa fa-envelope-o"></i>
                <span class="badge bg-green">6</span>
            </a>
            <ul id="menu2" class="dropdown-menu list-unstyled msg_list" role="menu">
                <li>
                    <a data-toggle="modal" data-target="#Notification">
                        <span class="image"><img src="~/images/test01.jpg" alt="Profile Image" /></span>
                        <span>
                            <span>John Smith</span>
                            <span class="time">3 mins ago</span>
                        </span>
                        <span class="message">
                            Film festivals used to be do-or-die moments for movie makers. They were where...
                        </span>
                    </a>
                </li>
                <li>
                    <a data-toggle="modal" data-target="#Notification">
                        <span class="image"><img src="~/images/test01.jpg" alt="Profile Image" /></span>
                        <span>
                            <span>John Smith</span>
                            <span class="time">3 mins ago</span>
                        </span>
                        <span class="message">
                            Film festivals used to be do-or-die moments for movie makers. They were where...
                        </span>
                    </a>
                </li>
                <li>
                    <a data-toggle="modal" data-target="#Notification">
                        <span class="image"><img src="~/images/test01.jpg" alt="Profile Image" /></span>
                        <span>
                            <span>John Smith</span>
                            <span class="time">3 mins ago</span>
                        </span>
                        <span class="message">
                            Film festivals used to be do-or-die moments for movie makers. They were where...
                        </span>
                    </a>
                </li>
                <li>
                    <a data-toggle="modal" data-target="#Notification">
                        <span class="image"><img src="~/images/test01.jpg" alt="Profile Image" /></span>
                        <span>
                            <span>John Smith</span>
                            <span class="time">3 mins ago</span>
                        </span>
                        <span class="message">
                            Film festivals used to be do-or-die moments for movie makers. They were where...
                        </span>
                    </a>
                </li>
                <li>
                    <div class="text-center">
                        <a>
                            <strong>See All Alerts</strong>
                            <i class="fa fa-angle-right"></i>
                        </a>
                    </div>
                </li>
            </ul>
        </li>*@
    <li role="presentation" class="dropdown">
        <a href="javascript:;" class="dropdown-toggle info-number" data-toggle="dropdown" aria-expanded="false">
            <i class="fa fa-bell-o"></i>
            <span id="notifyCount" class="badge bg-green">0</span>
        </a>
        <ul id="menu1" class="dropdown-menu list-unstyled msg_list" role="menu">
            @*<li>
                    <a data-toggle="modal" data-target="#Notification">
                        <span class="image"><img src="~/images/test01.jpg" alt="Profile Image" /></span>
                        <span>
                            <span>John Smith</span>
                            <span class="time">3 mins ago</span>
                        </span>
                        <span class="message">
                            Film festivals used to be do-or-die moments for movie makers. They were where...
                        </span>
                    </a>
                </li>
                <li>
                    <a data-toggle="modal" data-target="#Notification">
                        <span class="image"><img src="~/images/test01.jpg" alt="Profile Image" /></span>
                        <span>
                            <span>John Smith</span>
                            <span class="time">3 mins ago</span>
                        </span>
                        <span class="message">
                            Film festivals used to be do-or-die moments for movie makers. They were where...
                        </span>
                    </a>
                </li>
                <li>
                    <a data-toggle="modal" data-target="#Notification">
                        <span class="image"><img src="~/images/test02.jpg" alt="Profile Image" /></span>
                        <span>
                            <span>John Smith</span>
                            <span class="time">3 mins ago</span>
                        </span>
                        <span class="message">
                            Film festivals used to be do-or-die moments for movie makers. They were where...
                        </span>
                    </a>
                </li>
                <li>
                    <a data-toggle="modal" data-target="#Notification">
                        <span class="image"><img src="~/images/test03.jpg" alt="Profile Image" /></span>
                        <span>
                            <span>John Smith</span>
                            <span class="time">3 mins ago</span>
                        </span>
                        <span class="message">
                            Film festivals used to be do-or-die moments for movie makers. They were where...
                        </span>
                    </a>
                </li>*@
            @*<li>
                    <div class="text-center">
                        <a>
                            <strong>See All Alerts</strong>
                            <i class="fa fa-angle-right"></i>
                        </a>
                    </div>
                </li>*@
        </ul>
    </li>
</ul>
@if (@Session["loggedInUser"] != null)
{
    <input type="hidden" id="hdnLoggedUser" value="@Session["loggedInUser"].ToString()" />
}
else
{
    <input type="hidden" id="hdnLoggedUser" value="" />
}
@if (@Session["profilePic"] != null)
{
    <input type="hidden" id="hdnProfilePic" value="@Session["ProfilePic"].ToString()" />
}
else
{
    <input type="hidden" id="hdnProfilePic" value="" />
}
<script src="~/Scripts/jquery.signalR-2.3.0.min.js"></script>
<script src="~/SignalR/Hubs"></script>

<script type="text/javascript">
    $(document).ready(function () {




        if ($('#hdnLoggedUser').val() != '' && $('#hdnLoggedUser').val() != undefined && $('#hdnLoggedUser').val() != null) {
            $('#btnLogin').addClass("hidden");
            if ($('#hdnProfilePic').val() != '' && $('#hdnProfilePic').val() != undefined && $('#hdnProfilePic').val() != null) {
                $('#profilePic').attr('src', $('#hdnProfilePic').val());
                $('#profilePic').removeClass('hidden');
                $('#btnLogout').removeClass('hidden');
                $('#loggedInUser').addClass("hidden");
            } else {
                $('#profilePic').attr('src', '');
                $('#profilePic').addClass('hidden');
                $('#btnLogout').removeClass('hidden');
                $('#loggedInUser').removeClass("hidden");
                $('#lblUser').append($('#hdnLoggedUser').val());
            }
        } else {
            $('#btnLogin').removeClass("hidden");
            $('#loggedInUser').addClass("hidden");
            $('#btnLogout').addClass("hidden");
            $('#profilePic').addClass('hidden');
        }




        //execute on document ready
        $(function () {
            //function that the hub can call when it receives a notification.
            $.connection.notificationHub.client.displayNotification = function (title, message, alertType) {

                //Create the bootstrap alert html
                //var alertHtml = '<span>' + htmlEncode(title) + '  ' + htmlEncode(message) + '</span>';


                var alertHtml = '<li><a data-toggle="modal">' +
                    '</span><span class="message">' + htmlEncode(message) + '</span></a></li>';

                $(alertHtml)
                    .hide()                           //hide the newly created element (this is required for fadeIn to work)
                    .appendTo('#menu1')   //add it to the palceholder in the page
                    .fadeIn(500);                     //little flair to grab user attention

                var count = $('#menu1 li').length;
                $('#notifyCount').text(count);
            };

            window.notifyApp = {
                hubConnector: $.connection.hub.start()  //start the connection and store object returned globally for access in child views
            };

        });
    });
</script>